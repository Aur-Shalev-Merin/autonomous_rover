<launch>
  <!-- Basic transform tree -->
  <node pkg="tf" type="static_transform_publisher" name="map_to_odom" 
        args="0 0 0 0 0 0 map odom 100" />
        
  <node pkg="tf" type="static_transform_publisher" name="odom_to_base" 
        args="0 0 0 0 0 0 odom base_link 100" />
        
  <!-- Create a fake map -->
  <node pkg="map_server" type="map_server" name="map_server" 
        args="$(find rover_navigation)/config/empty_map.yaml" />
  
  <!-- Run move_base with minimal configuration -->
  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <param name="controller_frequency" value="2.0" />
    <param name="planner_frequency" value="0.5" />
    <param name="transform_tolerance" value="1.0" />
    <param name="recovery_behavior_enabled" value="false" />
    
    <!-- Use a simpler planner -->
    <param name="base_global_planner" value="navfn/NavfnROS" />
    <param name="base_local_planner" value="base_local_planner/TrajectoryPlannerROS" />
    
    <!-- Use simplified costmaps without obstacles -->
    <rosparam>
      global_costmap:
        global_frame: map
        robot_base_frame: base_link
        update_frequency: 1.0
        publish_frequency: 0.5
        static_map: true
        transform_tolerance: 1.0
        
      local_costmap:
        global_frame: odom
        robot_base_frame: base_link
        update_frequency: 2.0
        publish_frequency: 1.0
        static_map: false
        rolling_window: true
        width: 3.0
        height: 3.0
        resolution: 0.05
        transform_tolerance: 1.0
        
      TrajectoryPlannerROS:
        max_vel_x: 0.2
        min_vel_x: 0.1
        max_vel_theta: 0.5
        min_in_place_vel_theta: 0.2
        escape_vel: -0.1
        acc_lim_x: 0.5
        acc_lim_theta: 1.0
        holonomic_robot: false
        yaw_goal_tolerance: 0.6
        xy_goal_tolerance: 0.3
        latch_xy_goal_tolerance: true
        sim_time: 2.0
        controller_frequency: 5.0
    </rosparam>
  </node>
  
  <!-- Enable keyboard control for testing -->
  <node pkg="teleop_twist_keyboard" type="teleop_twist_keyboard.py" name="teleop" output="screen" />
</launch>
